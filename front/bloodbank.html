{% extends "base.html" %}
{% block content %}

<h2 class="text-center text-danger fw-bold mb-4">ðŸ©¸ Blood Bank Management</h2>

<!-- ===================== ADD BLOOD BANK FORM ===================== -->
<div class="card shadow-sm p-4 mb-4 border-0 rounded-4">

    <h4 class="text-danger fw-bold mb-3 text-center">âž• Add New Blood Bank</h4>

    <form method="POST" action="/bloodbank">

        <div class="row g-3">

            <div class="col-md-6">
                <label class="form-label fw-semibold">Blood Bank Name</label>
                <input type="text" name="BB_name" class="form-control"
                       placeholder="Enter name" required>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-semibold">Contact</label>
                <input type="number" name="BB_contact" class="form-control"
                       placeholder="Contact number" required>
            </div>

            <div class="col-md-12">
                <label class="form-label fw-semibold">Address</label>
                <textarea name="BB_address" class="form-control"
                          rows="2" placeholder="Enter address" required></textarea>
            </div>

            <div class="col-md-6">
                <label class="form-label fw-semibold">Initial Volume (ml)</label>
                <input type="number" name="BB_volume" class="form-control"
                       placeholder="Enter stock volume" required>
            </div>

            <!-- AUTOMATIC FK â†’ Foundation ID = 1 -->
            <input type="hidden" name="F2_id" value="1">

        </div>

        <div class="text-center mt-3">
            <button type="submit" class="btn btn-danger px-5 py-2 fw-semibold">
                Add Blood Bank
            </button>
        </div>

    </form>
</div>


<!-- ===================== BLOOD BANK LIST TABLE ===================== -->
<h4 class="text-danger fw-bold mb-3 text-center">ðŸ“‹ Blood Bank List</h4>

{% if banks %}
<table class="table table-bordered table-striped shadow-sm text-center align-middle">
    <thead class="table-danger">
        <tr>
            {% for h in headers %}
                <th>{{ h }}</th>
            {% endfor %}
        </tr>
    </thead>

    <tbody>
        {% for row in banks %}
        <tr>
            <td>{{ row.BB_ID }}</td>
            <td>{{ row.BB_NAME }}</td>
            <td>{{ row.BB_ADDRESS }}</td>
            <td>{{ row.BB_CONTACT }}</td>
            <td>{{ row.BB_VOLUME }} ml</td>
            <td>{{ row.F2_ID }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% else %}
<div class="alert alert-warning text-center fw-semibold">
    âš  No bloodbank records found.
</div>
{% endif %}

<div class="text-center mt-4">
    <a href="/hospital" class="btn btn-outline-dark px-5 py-2 mx-2">â¬… Hospitals</a>
    <a href="/employee" class="btn btn-danger px-5 py-2 mx-2">Next: Employees âžœ</a>
</div>

{% endblock %}
