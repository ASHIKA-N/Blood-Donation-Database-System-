<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Blood Bank - ARYAMS</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">

  <h2 class="text-center text-danger mb-4 fw-bold">ü©∏ BLOOD BANK DASHBOARD</h2>

  <!-- ‚úÖ Flash Messages -->
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="alert alert-info text-center fw-semibold shadow-sm mb-4">
        {{ messages[0] }}
      </div>
    {% endif %}
  {% endwith %}

  <!-- ‚ûï Add Blood Bank -->
  <form method="POST" action="/bloodbank" class="card p-4 shadow-sm mb-5 border-0 rounded-4">
    <h5 class="text-center text-danger mb-3 fw-bold">üè• Add Blood Bank</h5>
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label fw-semibold">Name</label>
        <input name="BB_name" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Contact</label>
        <input name="BB_contact" class="form-control" required>
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Blood Type</label>
        <input name="BB_type" class="form-control">
      </div>
      <div class="col-md-6">
        <label class="form-label fw-semibold">Volume (ml)</label>
        <input name="BB_volume" type="number" class="form-control">
      </div>
      <div class="col-12">
        <label class="form-label fw-semibold">Address</label>
        <textarea name="BB_address" class="form-control" rows="2"></textarea>
      </div>
      <div class="col-12">
        <label class="form-label fw-semibold">Foundation ID</label>
        <input name="F2_id" type="number" class="form-control">
      </div>
      <div class="text-center">
        <button class="btn btn-danger mt-3 px-5">Add Blood Bank</button>
      </div>
    </div>
  </form>

  <!-- üë• Add Employee to Blood Bank -->
  <form method="POST" action="/add_employee" class="card p-4 shadow-sm mb-5 border-0 rounded-4">
    <h5 class="text-center text-danger mb-3 fw-bold">üë®‚Äçüíº Add Employee to Blood Bank</h5>
    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label fw-semibold">Name</label>
        <input name="E_name" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label fw-semibold">Address</label>
        <input name="E_address" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label fw-semibold">Contact</label>
        <input name="E_contact" class="form-control" required>
      </div>
    </div>

    <div class="row g-3 mt-2">
      <div class="col-md-3">
        <label class="form-label fw-semibold">Age</label>
        <input name="E_age" type="number" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label fw-semibold">Designation</label>
        <input name="E_designation" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label fw-semibold">Experience (Years)</label>
        <input name="E_experience" type="number" class="form-control" required>
      </div>
      <div class="col-md-3">
        <label class="form-label fw-semibold">Blood Bank</label>
        <select name="BB1_id" class="form-select" required>
          <option value="">-- Select Blood Bank --</option>
          {% for bb in bloodbanks %}
          <option value="{{ bb[0] }}">{{ bb[1] }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <div class="text-center mt-4">
      <button class="btn btn-danger px-5">Add Employee</button>
    </div>
  </form>

  <!-- ü©∏ Existing Blood Banks -->
  <h4 class="text-center text-danger mb-3 fw-bold">üè• Existing Blood Banks</h4>
  <table class="table table-bordered table-striped mb-5 align-middle shadow-sm">
    <thead class="table-danger text-center">
      <tr>
        <th>ID</th><th>Name</th><th>Contact</th><th>Type</th><th>Volume</th><th>Address</th><th>Foundation ID</th>
      </tr>
    </thead>
    <tbody class="text-center">
      {% for b in banks %}
      <tr>
        <td>{{ b.BB_ID }}</td>
        <td>{{ b.BB_NAME }}</td>
        <td>{{ b.BB_CONTACT }}</td>
        <td>{{ b.BB_TYPE }}</td>
        <td>{{ b.BB_VOLUME }}</td>
        <td>{{ b.BB_ADDRESS }}</td>
        <td>{{ b.F2_ID }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <!-- üë®‚Äçüíº Existing Employees -->
  <h4 class="text-center text-danger mb-3 fw-bold">üë• Employees by Blood Bank</h4>
  <table class="table table-bordered table-striped align-middle shadow-sm">
    <thead class="table-danger text-center">
      <tr>
        {% for h in e_headers %}<th>{{ h }}</th>{% endfor %}
      </tr>
    </thead>
    <tbody class="text-center">
      {% for emp in employees %}
      <tr>
        {% for c in emp %}<td>{{ c }}</td>{% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="text-center mt-4">
    <a href="/" class="btn btn-outline-dark px-4">‚¨Ö Back to Home</a>
  </div>

</div>

<!-- üåà CSS Styling -->
<style>
  body {
    background-color: #f8f9fa;
    font-family: 'Poppins', sans-serif;
  }
  h2, h4, h5 {
    letter-spacing: 0.5px;
  }
  .card {
    transition: all 0.3s ease;
  }
  .card:hover {
    transform: translateY(-3px);
    box-shadow: 0 0.75rem 1rem rgba(220, 53, 69, 0.15);
  }
  .btn-danger {
    background-color: #dc3545;
    border: none;
    transition: 0.3s ease;
  }
  .btn-danger:hover {
    background-color: #b52a38;
    transform: scale(1.03);
  }
  .form-control,
  .form-select {
    border-radius: 8px;
    border: 1px solid rgba(220, 53, 69, 0.25);
  }
  .form-control:focus,
  .form-select:focus {
    border-color: #dc3545;
    box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
  }
</style>

</body>
</html>
