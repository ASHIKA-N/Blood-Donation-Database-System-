{% extends "base.html" %}
{% block content %}

<h2 class="text-center text-danger fw-bold mb-4">ðŸ’³ Customer Payment</h2>

{% if invoices %}
<table class="table table-bordered table-striped shadow-sm text-center align-middle">
    <thead class="table-danger">
        <tr>
            <th>Invoice ID</th>
            <th>Customer</th>
            <th>Blood Bank</th>
            <th>Amount (â‚¹)</th>
            <th>Status</th>
            <th>Pay</th>
        </tr>
    </thead>

    <tbody>
        {% for row in invoices %}
        <tr>
            <td>{{ row[0] }}</td>   <!-- Invoice ID -->
            <td>{{ row[1] }}</td>   <!-- Customer Name -->
            <td>{{ row[2] }}</td>   <!-- Bloodbank Name -->
            <td>{{ row[3] }}</td>   <!-- Amount -->
            <td>{{ row[4] }}</td>   <!-- Status -->

            <td>
                {% if row[4] == "Generated" %}
                <!-- PAY NOW BUTTON -->
                <form method="POST" action="/customer_payment" class="d-inline">
                    <input type="hidden" name="In_id" value="{{ row[0] }}">
                    <select name="method" class="form-select form-select-sm d-inline-block" style="width:130px;" required>
                        <option value="" disabled selected>Method</option>
                        <option>Cash</option>
                        <option>Card</option>
                        <option>UPI</option>
                    </select>
                    <button class="btn btn-success btn-sm ms-2">Pay Now</button>
                </form>
                {% else %}
                <span class="badge bg-success">Paid</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-warning text-center fw-semibold">
    âš  No invoices found.
</div>
{% endif %}

<div class="text-center mt-4">
    <a href="/employee" class="btn btn-outline-dark px-5 py-2">â¬… Back to Employee</a>
</div>

{% endblock %}
